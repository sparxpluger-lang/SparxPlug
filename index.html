<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SparxPlug Stealth Deployment</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #0f0f0f;
            color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }
        .container {
            background: #1a1a1a;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            border: 1px solid #f68026;
            max-width: 500px;
            text-align: center;
        }
        h1 { color: #f68026; margin-bottom: 10px; }
        p { color: #aaa; font-size: 0.9rem; line-height: 1.5; }
        .code-box {
            background: #000;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: monospace;
            font-size: 0.8rem;
            overflow-x: auto;
            text-align: left;
            border: 1px solid #333;
            max-height: 200px;
        }
        button {
            background: #f68026;
            color: #000;
            border: none;
            padding: 12px 25px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
        }
        button:hover { background: #ff9d4d; transform: scale(1.05); }
        .footer { margin-top: 20px; font-size: 0.7rem; color: #555; }
    </style>
</head>
<body>

<div class="container">
    <h1>SparxPlug Stealth</h1>
    <p>Ultimate automation for Sparx Reader. Includes WPM control, Admin Instant mode, and Stealth features.</p>
    
    <div class="code-box" id="script-code">
/* SparxPlug Stealth Loader */
(function() {
    const MODEL = 'llama-3.3-70b-versatile'; 
    let currentWPM = localStorage.getItem('sparx_wpm') || 500;
    let autoMode = false;
    let autoInterval = null;
    let isReading = false;

    const container = document.createElement('div');
    container.id = "sparxplug-container";
    container.style = "position: fixed; top: 100px; right: 10px; z-index: 10000; background: #121212; padding: 0; border-radius: 12px; box-shadow: 0 10px 40px rgba(0,0,0,0.7); font-family: sans-serif; width: 200px; border: 1px solid #f68026; color: white; user-select: none; touch-action: none; overflow: hidden;";
    
    const header = document.createElement('div');
    header.style = "background: #f68026; color: black; padding: 10px; cursor: move; font-weight: 800; font-size: 14px; text-align: center; touch-action: none;";
    header.innerHTML = `SparxPlug Stealth`;
    
    const body = document.createElement('div');
    body.style = "padding: 10px; display: flex; flex-direction: column; gap: 8px;";

    const keyInput = document.createElement('input');
    keyInput.type = "password";
    keyInput.placeholder = "Paste Groq Key";
    keyInput.style = "background: #000; color: #f68026; border: 1px solid #333; padding: 6px; border-radius: 4px; font-size: 10px; outline: none;";
    keyInput.value = localStorage.getItem('sparx_key') || "";
    keyInput.onchange = () => localStorage.setItem('sparx_key', keyInput.value);

    const adminBtn = document.createElement('button');
    adminBtn.innerText = "‚ö° ADMIN (INSTANT)";
    adminBtn.style = "cursor: pointer; background: #ff0000; color: white; border: none; padding: 10px; border-radius: 5px; font-weight: 900; font-size: 12px; text-shadow: 0 0 5px black;";

    const sliderLabel = document.createElement('div');
    sliderLabel.style = "font-size: 10px; color: #f68026; display: flex; justify-content: space-between;";
    sliderLabel.innerHTML = `<span>Reading Speed</span><span id="wpm-val">${currentWPM} WPM</span>`;

    const wpmSlider = document.createElement('input');
    wpmSlider.type = "range"; wpmSlider.min = "100"; wpmSlider.max = "1000"; wpmSlider.value = currentWPM;
    wpmSlider.style = "width: 100%; cursor: pointer; accent-color: #f68026;";
    wpmSlider.oninput = (e) => {
        currentWPM = e.target.value;
        document.getElementById('wpm-val').innerText = `${currentWPM} WPM`;
        localStorage.setItem('sparx_wpm', currentWPM);
    };

    const readBtn = document.createElement('button');
    readBtn.innerText = "üìñ Read";
    readBtn.style = "cursor: pointer; background: #2a2a2a; color: white; border: 1px solid #444; padding: 10px; border-radius: 5px; font-size: 12px;";
    
    const answerBtn = document.createElement('button');
    answerBtn.innerText = "ü§ñ Answer";
    answerBtn.style = "cursor: pointer; background: #f68026; color: black; border: none; padding: 10px; border-radius: 5px; font-weight: bold; font-size: 12px;";

    const autoBtn = document.createElement('button');
    autoBtn.innerText = "üöÄ Auto: OFF";
    autoBtn.style = "cursor: pointer; background: #333; color: white; border: 1px solid #555; padding: 10px; border-radius: 5px; font-size: 12px; font-weight: bold;";
    
    body.append(keyInput, adminBtn, sliderLabel, wpmSlider, readBtn, answerBtn, autoBtn);
    container.append(header, body);
    document.body.appendChild(container);

    let active = false, currentX, currentY, initialX, initialY, xOffset = 0, yOffset = 0;
    function dragStart(e) { initialX = (e.type === "touchstart" ? e.touches[0].clientX : e.clientX) - xOffset; initialY = (e.type === "touchstart" ? e.touches[0].clientY : e.clientY) - yOffset; if (e.target === header) active = true; }
    function dragEnd() { initialX = currentX; initialY = currentY; active = false; }
    function drag(e) { if (!active) return; e.preventDefault(); currentX = (e.type === "touchmove" ? e.touches[0].clientX : e.clientX) - initialX; currentY = (e.type === "touchmove" ? e.touches[0].clientY : e.clientY) - initialY; xOffset = currentX; yOffset = currentY; container.style.transform = `translate3d(${currentX}px, ${currentY}px, 0)`; }
    header.addEventListener("touchstart", dragStart); window.addEventListener("touchend", dragEnd); window.addEventListener("touchmove", drag, { passive: false });
    header.addEventListener("mousedown", dragStart); window.addEventListener("mouseup", dragEnd); window.addEventListener("mousemove", drag);

    let storyText = "";

    const doRead = async (isInstant = false) => {
        if (isReading) return false;
        const content = document.querySelector('.read-content')?.innerText;
        const sparxReadBtn = document.querySelector('button[data-test-id="read-button"]');
        if (content && sparxReadBtn && sparxReadBtn.getAttribute('aria-disabled') === 'false') {
            storyText = content.replace(/\s+/g, ' ').trim();
            if (!isInstant) {
                isReading = true;
                const wordCount = storyText.split(/\s+/).length;
                const totalWait = ((wordCount / currentWPM) * 60) + ((Math.random() * 0.2 - 0.1) * ((wordCount / currentWPM) * 60));
                let remaining = Math.ceil(totalWait);
                const countdown = setInterval(() => { readBtn.innerText = `‚è≥ ${remaining}s`; remaining--; if (remaining < 0) clearInterval(countdown); }, 1000);
                await new Promise(r => setTimeout(r, totalWait * 1000));
                isReading = false;
            }
            sparxReadBtn.click();
            readBtn.innerText = "‚úÖ Done";
            setTimeout(() => { readBtn.innerText = "üìñ Read"; }, 2000);
            return true;
        }
        return false;
    };

    const doContinue = () => {
        const nextBtn = document.querySelector('button[data-test-id="next-continue-button"]');
        const continueBtn = Array.from(document.querySelectorAll('button')).find(b => b.innerText.includes("Continue"));
        const target = nextBtn || continueBtn;
        if (target && target.getAttribute('aria-disabled') === 'false') { target.click(); return true; }
        return false;
    };

    const doAnswer = async (isInstant = false) => {
        if (isReading && !isInstant) return;
        const API_KEY = keyInput.value;
        const question = document.querySelector('.sr_6690a5cb')?.innerText;
        const optionEls = document.querySelectorAll('.sr_ec0ba328 button .sr_9688e5d2');
        if (!API_KEY || !question || optionEls.length === 0) return;

        answerBtn.innerText = "‚åõ Thinking...";
        try {
            const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                method: "POST",
                headers: { "Content-Type": "application/json", "Authorization": `Bearer ${API_KEY}` },
                body: JSON.stringify({
                    model: MODEL,
                    messages: [{ role: "system", content: "Identify correct option. Exact text only." }, { role: "user", content: `Story: ${storyText}\n\nQ: ${question}\nOptions: ${Array.from(optionEls).map(e=>e.innerText).join(' | ')}` }],
                    temperature: 0
                })
            });
            const data = await response.json();
            const aiAnswer = data.choices[0].message.content.trim().replace(/^["']|["']$/g, '');
            document.querySelectorAll('.sr_ec0ba328 button').forEach(btn => {
                if (btn.innerText.toLowerCase().includes(aiAnswer.toLowerCase())) {
                    btn.style.border = "4px solid #f68026";
                    btn.click();
                    if (autoMode || isInstant) setTimeout(doContinue, isInstant ? 100 : 1500);
                }
            });
        } catch (e) { answerBtn.innerText = "‚ùå Error"; }
        finally { if (!answerBtn.innerText.includes("‚ùå")) answerBtn.innerText = "ü§ñ Answer"; }
    };

    adminBtn.onclick = async () => {
        adminBtn.innerText = "‚ö° RUNNING...";
        await doRead(true);
        await new Promise(r => setTimeout(r, 200));
        await doAnswer(true);
        adminBtn.innerText = "‚ö° ADMIN (INSTANT)";
    };

    readBtn.onclick = () => doRead(false);
    answerBtn.onclick = () => doAnswer(false);

    autoBtn.onclick = () => {
        autoMode = !autoMode;
        autoBtn.innerText = autoMode ? "üöÄ Auto: ON" : "üöÄ Auto: OFF";
        autoBtn.style.background = autoMode ? "#f68026" : "#333";
        if (autoMode) {
            autoInterval = setInterval(async () => {
                if (!isReading) {
                    await doRead(false);
                    doContinue();
                    if (document.querySelector('.sr_6690a5cb')) await doAnswer(false);
                }
            }, 3000); 
        } else { clearInterval(autoInterval); }
    };
})();
    </div>

    <button onclick="copyScript()">Copy to Clipboard</button>
    <div class="footer">For educational use only. Keep WPM realistic to avoid detection.</div>
</div>

<script>
    function copyScript() {
        const text = document.getElementById('script-code').innerText;
        navigator.clipboard.writeText(text).then(() => {
            alert('Script copied! Paste it into your browser console on Sparx Reader.');
        });
    }
</script>

</body>
</html>
